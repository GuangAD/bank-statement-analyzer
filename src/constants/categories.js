/**
 * äº¤æ˜“åˆ†ç±»é…ç½®
 * åŒ…å«20ä¸ªé¢„è®¾åˆ†ç±»åŠå…¶å…³é”®è¯åŒ¹é…è§„åˆ™
 */

export const CATEGORIES = [
  {
    id: "salary",
    name: "å·¥èµ„è–ªé…¬",
    icon: "ðŸ’°",
    color: "#4CAF50",
    keywords: [
      "å·¥èµ„",
      "è–ªèµ„",
      "ä»£å‘",
      "è–ªé‡‘",
      "æœˆè–ª",
      "å¥–é‡‘",
      "ç»©æ•ˆ",
      "æ´¥è´´",
      "è¡¥è´´",
    ],
  },
  {
    id: "transfer",
    name: "é“¶è¡Œè½¬è´¦",
    icon: "ðŸ¦",
    color: "#2196F3",
    keywords: ["è½¬è´¦", "æ±‡æ¬¾", "è½¬å…¥", "è½¬å‡º", "ç½‘é“¶è½¬", "æ‰‹æœºé“¶è¡Œ", "è·¨è¡Œ"],
  },
  {
    id: "wechat_pay",
    name: "å¾®ä¿¡æ”¯ä»˜",
    icon: "ðŸ’¬",
    color: "#07C160",
    keywords: [
      "å¾®ä¿¡",
      "è´¢ä»˜é€š",
      "å¾®ä¿¡æ”¯ä»˜",
      "å¾®ä¿¡è½¬è´¦",
      "å¾®ä¿¡çº¢åŒ…",
      "å¾®ä¿¡é›¶é’±",
      "ç†è´¢é€š",
    ],
  },
  {
    id: "alipay",
    name: "æ”¯ä»˜å®",
    icon: "ðŸ”·",
    color: "#1677FF",
    keywords: [
      "æ”¯ä»˜å®",
      "èš‚èš",
      "èŠ±å‘—",
      "å€Ÿå‘—",
      "ä½™é¢å®",
      "èŠéº»",
      "ç½‘å•†é“¶è¡Œ",
      "æ”¯ä»˜å®è½¬è´¦",
    ],
  },
  {
    id: "credit_card",
    name: "ä¿¡ç”¨å¡è¿˜æ¬¾",
    icon: "ðŸ’³",
    color: "#9C27B0",
    keywords: ["ä¿¡ç”¨å¡", "è¿˜æ¬¾", "è´¦å•", "åˆ†æœŸ"],
  },
  {
    id: "investment",
    name: "æŠ•èµ„ç†è´¢",
    icon: "ðŸ“ˆ",
    color: "#00BCD4",
    keywords: [
      "åŸºé‡‘",
      "ç†è´¢",
      "ä½™é¢å®",
      "è‚¡ç¥¨",
      "è¯åˆ¸",
      "å®šæœŸ",
      "å­˜æ¬¾",
      "åˆ©æ¯",
      "æ”¶ç›Š",
      "èµŽå›ž",
      "ç”³è´­",
      "å¤©å¼˜",
      "æ‹›å•†åŸºé‡‘",
      "åŽå¤åŸºé‡‘",
      "æ˜“æ–¹è¾¾",
    ],
  },
  {
    id: "housing",
    name: "æˆ¿ç§Ÿæˆ¿è´·",
    icon: "ðŸ ",
    color: "#795548",
    keywords: ["æˆ¿ç§Ÿ", "æˆ¿è´·", "æŒ‰æ­", "ç‰©ä¸š", "ä½æˆ¿", "å…¬ç§¯é‡‘", "ç§Ÿé‡‘"],
  },
  {
    id: "transport",
    name: "äº¤é€šå‡ºè¡Œ",
    icon: "ðŸš—",
    color: "#607D8B",
    keywords: [
      "åŠ æ²¹",
      "æ‰“è½¦",
      "åœ°é“",
      "é«˜é“",
      "æœºç¥¨",
      "åœè½¦",
      "æ»´æ»´",
      "å‡ºç§Ÿè½¦",
      "é“è·¯",
      "èˆªç©º",
      "å…¬äº¤",
      "ETC",
      "è¿‡è·¯è´¹",
      "é«˜é€Ÿ",
    ],
  },
  {
    id: "dining",
    name: "é¤é¥®ç¾Žé£Ÿ",
    icon: "ðŸ”",
    color: "#FF9800",
    keywords: [
      "ç¾Žå›¢",
      "é¥¿äº†ä¹ˆ",
      "é¤é¥®",
      "å¤–å–",
      "é¤åŽ…",
      "é£Ÿå ‚",
      "å’–å•¡",
      "å¥¶èŒ¶",
      "è‚¯å¾·åŸº",
      "éº¦å½“åŠ³",
      "æ˜Ÿå·´å…‹",
      "ç‘žå¹¸",
    ],
  },
  {
    id: "online_shopping",
    name: "ç½‘è´­æ¶ˆè´¹",
    icon: "ðŸ›’",
    color: "#E91E63",
    keywords: [
      "æ·˜å®",
      "äº¬ä¸œ",
      "æ‹¼å¤šå¤š",
      "å¤©çŒ«",
      "è‹å®",
      "å”¯å“ä¼š",
      "ç½‘è´­",
      "ç™½æ¡",
      "å¾—ç‰©",
      "é—²é±¼",
    ],
  },
  {
    id: "offline_shopping",
    name: "çº¿ä¸‹è´­ç‰©",
    icon: "ðŸª",
    color: "#8BC34A",
    keywords: [
      "è¶…å¸‚",
      "å•†åœº",
      "ä¾¿åˆ©åº—",
      "ç™¾è´§",
      "æ²ƒå°”çŽ›",
      "å®¶ä¹ç¦",
      "æ°¸è¾‰",
      "ç›’é©¬",
      "711",
      "å…¨å®¶",
    ],
  },
  {
    id: "telecom",
    name: "é€šè®¯ç¼´è´¹",
    icon: "ðŸ“±",
    color: "#03A9F4",
    keywords: ["ç§»åŠ¨", "è”é€š", "ç”µä¿¡", "è¯è´¹", "æµé‡", "å®½å¸¦", "é€šä¿¡"],
  },
  {
    id: "utilities",
    name: "æ°´ç”µç‡ƒæ°”",
    icon: "ðŸ’¡",
    color: "#FFC107",
    keywords: [
      "æ°´è´¹",
      "ç”µè´¹",
      "ç‡ƒæ°”",
      "æš–æ°”",
      "ä¾›æš–",
      "ç…¤æ°”",
      "ç”µåŠ›",
      "è‡ªæ¥æ°´",
    ],
  },
  {
    id: "medical",
    name: "åŒ»ç–—å¥åº·",
    icon: "ðŸ¥",
    color: "#F44336",
    keywords: [
      "åŒ»é™¢",
      "è¯åº—",
      "ä½“æ£€",
      "æŒ‚å·",
      "åŒ»ç–—",
      "è¯Šæ‰€",
      "è¯æˆ¿",
      "é—¨è¯Š",
      "ä½é™¢",
      "åŒ»ä¿",
    ],
  },
  {
    id: "education",
    name: "æ•™è‚²åŸ¹è®­",
    icon: "ðŸŽ“",
    color: "#3F51B5",
    keywords: ["å­¦è´¹", "åŸ¹è®­", "ä¹¦ç±", "è¯¾ç¨‹", "æ•™è‚²", "å­¦æ ¡", "è€ƒè¯•", "æŠ¥å"],
  },
  {
    id: "entertainment",
    name: "å¨±ä¹ä¼‘é—²",
    icon: "ðŸŽ®",
    color: "#673AB7",
    keywords: [
      "ç”µå½±",
      "æ¸¸æˆ",
      "KTV",
      "æ—…æ¸¸",
      "é—¨ç¥¨",
      "æ¼”å‡º",
      "å¥èº«",
      "è¿åŠ¨",
      "è…¾è®¯",
      "ç½‘æ˜“",
      "é…’åº—",
      "æ°‘å®¿",
    ],
  },
  {
    id: "clothing",
    name: "æœè£…é…é¥°",
    icon: "ðŸ‘”",
    color: "#009688",
    keywords: [
      "æœè£…",
      "éž‹å¸½",
      "ä¼˜è¡£åº“",
      "ZARA",
      "HM",
      "è€å…‹",
      "é˜¿è¿ªè¾¾æ–¯",
      "è¡£æœ",
      "è£¤å­",
      "éž‹å­",
    ],
  },
  {
    id: "beauty",
    name: "ç¾Žå®¹æŠ¤ç†",
    icon: "ðŸ’„",
    color: "#E91E63",
    keywords: ["ç¾Žå®¹", "ç¾Žå‘", "åŒ–å¦†å“", "æŠ¤è‚¤", "ç†å‘", "SPA", "ç¾Žç”²"],
  },
  {
    id: "pets",
    name: "å® ç‰©ç›¸å…³",
    icon: "ðŸ•",
    color: "#8D6E63",
    keywords: ["å® ç‰©", "çŒ«ç²®", "ç‹—ç²®", "å® ç‰©åŒ»é™¢", "å® ç‰©åº—"],
  },
  {
    id: "social",
    name: "äººæƒ…å¾€æ¥",
    icon: "ðŸŽ",
    color: "#F06292",
    keywords: ["çº¢åŒ…", "ç¤¼é‡‘", "ä»½å­é’±", "éšç¤¼", "é€ç¤¼", "è´ºç¤¼"],
  },
  {
    id: "service",
    name: "ç”Ÿæ´»æœåŠ¡",
    icon: "ðŸ”§",
    color: "#78909C",
    keywords: [
      "å¿«é€’",
      "å®¶æ”¿",
      "ç»´ä¿®",
      "ä¿æ´",
      "æ¬å®¶",
      "é¡ºä¸°",
      "åœ†é€š",
      "ä¸­é€š",
      "éŸµè¾¾",
    ],
  },
  {
    id: "other",
    name: "å…¶ä»–",
    icon: "â“",
    color: "#9E9E9E",
    keywords: [],
  },
];

/**
 * æ ¹æ®äº¤æ˜“æè¿°å’Œå¯¹æ–¹æˆ·åè‡ªåŠ¨åˆ†ç±»
 * @param {string} description - äº¤æ˜“æ‘˜è¦
 * @param {string} counterparty - å¯¹æ–¹æˆ·å
 * @returns {object} åˆ†ç±»å¯¹è±¡
 */
export function categorizeTransaction(description = "", counterparty = "") {
  const text = `${description} ${counterparty}`.toLowerCase();

  // éåŽ†åˆ†ç±»è¿›è¡ŒåŒ¹é…
  for (const category of CATEGORIES) {
    if (category.id === "other") continue; // è·³è¿‡"å…¶ä»–"åˆ†ç±»

    for (const keyword of category.keywords) {
      if (text.includes(keyword.toLowerCase())) {
        return category;
      }
    }
  }

  // æœªåŒ¹é…åˆ°è¿”å›ž"å…¶ä»–"
  return CATEGORIES.find((c) => c.id === "other");
}

/**
 * èŽ·å–åˆ†ç±»é€šè¿‡ID
 * @param {string} categoryId - åˆ†ç±»ID
 * @returns {object} åˆ†ç±»å¯¹è±¡
 */
export function getCategoryById(categoryId) {
  return (
    CATEGORIES.find((c) => c.id === categoryId) ||
    CATEGORIES.find((c) => c.id === "other")
  );
}
